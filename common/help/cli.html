<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>help:cli - [Workcraft]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="help,cli"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.html" title="Workcraft"/>
<link rel="start" href="cli.html"/>
<link rel="contents" href="cli.html" title="Sitemap"/>
<link rel="manifest" href="lib/exe/manifest.html"/>
<link rel="alternate" type="application/rss+xml" title="Changes" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" />
<link rel="edit" title="Edit this page" href="cli.html"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="_export/xhtml/help/cli.xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="_export/raw/help/cli.raw"/>
<link rel="canonical" href="http://192.168.0.4:8088/help/cli"/>
<link rel="stylesheet" href="lib/exe/css.php.t.dokuwiki-light-export.css"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='help';var SIG=" --- \/\/[[support@workcraft.org| ]] 2024\/01\/25 15:52\/\/";var JSINFO = {"fastwiki":{"secedit":1,"preview":1,"fastpages":1,"save":0,"fastshow":0,"fastshow_same_ns":1,"fastshow_include":"","fastshow_exclude":"","preload":0,"preload_head":"====47hsjwycv782nwncv8b920m8bv72jmdm3929bno3b3====","preload_batchsize":10,"preload_per_page":100,"locktime":840,"usedraft":1,"text_btn_show":"Show page","templatename":"dokuwiki-light-export"},"plugin_folded":{"hide":"hide","reveal":"reveal"},"move_renameokay":true,"plugins":{"vshare":{"youtube":"youtube\\.com\/.*[&?]v=([a-z0-9_\\-]+)","vimeo":"vimeo\\.com\\\/(\\d+)","slideshare":"slideshare.*id=(\\d+)","dailymotion":"dailymotion\\.com\/video\/([a-z0-9]+)","archiveorg":"archive\\.org\/(?:embed|details)\/([a-zA-Z0-9_\\-]+)","soundcloud":"soundcloud\\.com\/([\\w-]+\/[\\w-]+)","niconico":"nicovideo\\.jp\/watch\/(sm[0-9]+)","bitchute":"bitchute\\.com\\\/video\\\/([a-zA-Z0-9_\\-]+)","coub":"coub\\.com\\\/view\\\/([a-zA-Z0-9_\\-]+)","odysee":"odysee\\.com\/\\$\/(?:embed|download)\/([-%_?=\/a-zA-Z0-9]+)","youku":"v\\.youku\\.com\/v_show\/id_([0-9A-Za-z=]+)\\.html","bilibili":"bilibili\\.com\\\/video\\\/(BV[0-9A-Za-z]+)","msoffice":"(?:office\\.com.*[&?]videoid=([a-z0-9\\-]+))","msstream":"microsoftstream\\.com\\\/video\\\/([a-f0-9\\-]{36})"}},"id":"help:cli","namespace":"help","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script src="lib/exe/jquery.php.t.dokuwiki-light-export.js" defer="defer">/*<![CDATA[*/
/*!]]>*/</script>
<script src="lib/exe/js.php.t.dokuwiki-light-export.js" defer="defer">/*<![CDATA[*/
/*!]]>*/</script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="favicon.ico" />
<link rel="apple-touch-icon" href="apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki-light-export loggedIn    ">

        
<!-- ********** HEADER ********** -->
<header id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <h1 class="logo"><a href="start.html"  accesskey="" title=""><img src="logo.png" width="381" height="64" alt="" /></a></h1>
            </div>

    <hr class="a11y" />
</div></header><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <main id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>help:cli</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="plugin_fastwiki_marker" style="display:none"></div><!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#special_symbols_in_file_names">Special symbols in file names</a></div></li>
<li class="level1"><div class="li"><a href="#examples_of_working_with_scripts">Examples of working with scripts</a></div></li>
<li class="level1"><div class="li"><a href="#examples_of_custom_config">Examples of custom config</a></div></li>
<li class="level1"><div class="li"><a href="#reuse_running_workcraft_instance">Reuse running Workcraft instance</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 id="command_line_interface">Command line interface</h1>
<div class="level1">

<p>
Workcraft command line usage is as follows <code>workcraft [OPTIONS] [FILES]</code>
</p>
<ul>
<li class="level1 node"><div class="li"> <code>OPTIONS</code> – space-separated list of the following options:</div>
<ul>
<li class="level2"><div class="li"> <code>-dir:DIR</code>           – path to the working directory</div>
</li>
<li class="level2"><div class="li"> <code>-config:CONFIG</code>     – user config file (default is global <code>config.xml</code>) <span class="wrap_info ">since <strong>v3.3.6</strong></span></div>
</li>
<li class="level2"><div class="li"> <code>-config-add:CONFIG</code> – additional read-only config file to override user config settings <span class="wrap_info ">since <strong>v3.3.8</strong></span></div>
</li>
<li class="level2"><div class="li"> <code>-exec:SCRIPT</code>       – JavaScript file or one-liner to execute on startup</div>
</li>
<li class="level2"><div class="li"> <code>-port:PORT</code>         – reuse running instance on <code>PORT</code> to open <code>FILES</code></div>
</li>
<li class="level2"><div class="li"> <code>-nogui</code>             – run in console mode</div>
</li>
<li class="level2"><div class="li"> <code>-noconfig-load</code>     – use default settings instead of loading them from user config <span class="wrap_info ">since <strong>v3.3.8</strong></span></div>
</li>
<li class="level2"><div class="li"> <code>-noconfig-save</code>     – do not overwrite user config on exit <span class="wrap_info ">since <strong>v3.3.8</strong></span></div>
</li>
<li class="level2"><div class="li"> <code>-noconfig</code>          – use default settings and do not overwrite user config</div>
</li>
<li class="level2"><div class="li"> <code>-version</code>           – report the version information and exit</div>
</li>
<li class="level2"><div class="li"> <code>-help</code>              – display this help message and exit</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <code>FILES</code> – space-separated list of work files to open or arguments for <code>SCRIPT</code></div>
</li>
</ul>

<p>
Note that file path parameters <code>CONFIG</code>, <code>SCRIPT</code> and <code>FILES</code> are relative to the working directory.
</p>

<p>
<span class="wrap_info ">since <strong>v3.3.8</strong></span> Use environment variables <code>WORKCRAFT_CONFIG</code> and <code>WORKCRAFT_CONFIG_ADD</code> as lower priority alternatives to command line options <code>-config:</code> and <code>-config-add:</code> respectively.
</p>

<p>
<span class="wrap_info ">since <strong>v3.4.0</strong></span> To run Workcraft with a specific version of Java Runtime Environment supply it in <code>jre</code> subdirectory of Workcraft installation. If this directory is not found or if <code>WORKCRAFT_USE_NATIVE_JAVA</code> environment variable is defined, then a natively installed Java is used.
</p>

</div>

<h2 id="special_symbols_in_file_names">Special symbols in file names</h2>
<div class="level2">

<p>
If your command line refers to a path containing spaces or other suspicious symbols, then surround it by quotation marks (both <code>&#039;</code> and <code>&quot;</code> are supported). For example, if you want to set a working directory to <em>&quot;C:\Workcraft Projects&quot;</em> and run a script <em>&quot;Example scripts\test1.js&quot;</em> in there, then Windows command line would look as follows:
</p>
<pre class="code shell">workcraft.bat -nogui -dir:&quot;C:\Workcraft Projects&quot; -exec:'Example scripts\test1.js'</pre>

<p>
Note that backslash symbols <code>\</code> in scripts (e.g. in a Windows file path) need to be escaped as in this example (notice the double backslashes):
</p>
<dl class="code">
<dt><a href="_export/code/help/cli/codeblock.1.code" title="Download Snippet" class="mediafile mf_js">test1.js</a></dt>
<dd><pre class="code javascript">work <span class="sy0">=</span> load<span class="br0">&#40;</span><span class="st0">&quot;models<span class="es0">\\</span>test1.work&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
stat <span class="sy0">=</span> statModel<span class="br0">&#40;</span>work<span class="br0">&#41;</span><span class="sy0">;</span>
write<span class="br0">&#40;</span>stat<span class="sy0">,</span> <span class="st0">&quot;C:<span class="es0">\\</span>Temp<span class="es0">\\</span>test1.txt&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
exit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</dd></dl>

<p>
Alternatively, Unix-style file hierarchy separator <code>/</code> can be used, as it does not require escaping and is recognised in all Linux, OSX and Windows:
</p>
<dl class="code">
<dt><a href="_export/code/help/cli/codeblock.2.code" title="Download Snippet" class="mediafile mf_js">test1.js</a></dt>
<dd><pre class="code javascript">work <span class="sy0">=</span> load<span class="br0">&#40;</span><span class="st0">&quot;models/test1.work&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
stat <span class="sy0">=</span> statModel<span class="br0">&#40;</span>work<span class="br0">&#41;</span><span class="sy0">;</span>
write<span class="br0">&#40;</span>stat<span class="sy0">,</span> <span class="st0">&quot;C:/Temp/test1.txt&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
exit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</dd></dl>

<p>
In the above examples <em>&quot;Example scripts\test1.js&quot;</em> and <em>&quot;models\test1.work&quot;</em> are relative to the working directory <em>&quot;C:\Workcraft Projects&quot;</em>, while the file <em>&quot;C:\Temp\test1.txt&quot;</em> is specified by its absolute path.
</p>

</div>

<h2 id="examples_of_working_with_scripts">Examples of working with scripts</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Execute a script given by its absolute path, running Workcraft without <abbr title="Graphical User Interface">GUI</abbr> and using all default settings <pre class="code bash">workcraft <span class="re5">-nogui</span> <span class="re5">-noconfig</span> -exec:<span class="st_h">'/path/to/script.js'</span></pre>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Execute a script whose path is relative to a given working directory, running Workcraft without <abbr title="Graphical User Interface">GUI</abbr> and using all default settings <pre class="code bash">workcraft <span class="re5">-nogui</span> <span class="re5">-noconfig</span> -exec:script.js -dir:<span class="st_h">'/path/to/working/directory/'</span></pre>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Execute a short JavaScript snippet directly, without creating a script file <pre class="code bash">workcraft <span class="re5">-nogui</span> -exec:<span class="st_h">'print(&quot;Hello!&quot;);exit();'</span></pre>
</div>
</li>
</ul>

</div>

<h2 id="examples_of_custom_config">Examples of custom config</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Start Workcraft with all default settings and write them into global <em>config.xml</em> on exit <pre class="code bash">workcraft <span class="re5">-noconfig-load</span></pre>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Start Workcraft with all the settings in global <em>config.xml</em> and override some of them by the settings in local <em>config-specific.xml</em> (<em>config.xml</em> will be overwritten on exit) <pre class="code bash">workcraft -config-add:config-specific.xml</pre>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Start Workcraft with all the settings in <em>config-base.xml</em>, override some of them by the settings in <em>config-specific.xml</em> and do not overwrite config.xml on exit <pre class="code bash">workcraft -config:config-base.xml -config-add:config-specific.xml <span class="re5">-noconfig-save</span></pre>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Start Workcraft with default settings, override some of them by the settings in <em>config-specific.xml</em> (passed via environment variable) and on exit write all the settings into <em>config-new.xml</em> (also passed via environment variable) <pre class="code bash"><span class="kw3">export</span> <span class="re2">WORKCRAFT_CONFIG</span>=config-new.xml
<span class="kw3">export</span> <span class="re2">WORKCRAFT_CONFIG_ADD</span>=config-specific.xml
workcraft <span class="re5">-noconfig-load</span></pre>
</div>
</li>
</ul>

</div>

<h2 id="reuse_running_workcraft_instance">Reuse running Workcraft instance</h2>
<div class="level2">

<p>
In order to reuse the same instance of Workcraft for opening <code>.work</code> files from a command line use <code>-port:NUMBER</code> option. This will enable Workcraft to check if its instance is already running and listening on that port, and if this is the case, pass data to the running instance via the specified port.
</p>

<p>
For example, the following sequence of commands would first start Workcraft on port <em>12345</em>, then open <em>file.work</em>, and finally execute <em>script.js</em>, all in the same instance of Workcraft (so <em>script.js</em> can refer for model in <em>file.work</em>):
</p>
<pre class="code bash">workcraft -port:<span class="nu0">12345</span>
workcraft -port:<span class="nu0">12345</span> file.work
workcraft -port:<span class="nu0">12345</span> -exec:script.js</pre>

<p>
This feature is is also convenient when associating <code>.work</code> files with Workcraft, so they can be open directly from a file browser. By default, a new instance of Workcraft would start each time a <code>.work</code> file is open this way. If you prefer to reuse a single instance of Workcraft, this can be achieved by <em>hard-coding</em> an unoccupied port number directly into <code>workcraft</code> runner script (e.g. add <code>-port:12345</code> just before <code>-dir:</code> option).
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo">
                    Copyright &copy; 2014-2024 workcraft.org                </div>

                
                <hr class="a11y" />
            </div></main><!-- /content -->

        </div><!-- /wrapper -->

            </div></div><!-- /site -->

    <div class="no"><img src="lib/exe/taskrunner.96ab28459a763b31c66cc5c819826309.gif" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
